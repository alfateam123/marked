Here&#39;s a simple block:


    foo


This should be a code block, though:

[code=text]&lt;div&gt;
    foo
&lt;/div&gt;
[/code]

As should this:

[code=text]&lt;div&gt;foo&lt;/div&gt;
[/code]

Now, nested:

            foo

This should just be an HTML comment:

<!-- Comment -->

Multiline:

<!--
Blah
Blah
-->

Code block:

[code=text]&lt;!-- Comment --&gt;
[/code]

Just plain comment, with trailing spaces on the line:

<!-- foo -->   

Code:

[code=text]&lt;hr&gt;
[/code]

Hr&#39;s:

[hr]

[hr]

[hr]

[hr]

[hr]

[hr]

[hr]

[hr]

[hr]
